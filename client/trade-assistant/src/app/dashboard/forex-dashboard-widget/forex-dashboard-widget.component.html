<div class="forex-widget">
  <h3>Forex Rates</h3>

  <div *ngIf="loading()" class="loading">Loading...</div>
  <div *ngIf="error()" class="error">{{ error() }}</div>

  <div class="controls">
    <label for="baseSelect">Base currency:</label>
    <select
      id="baseSelect"
      [ngModel]="selectedBase()"
      (ngModelChange)="onBaseChange($event)"
    >
      <option *ngFor="let b of bases" [value]="b">{{ b }}</option>
    </select>
  </div>

  <table *ngIf="latest() && !loading()">
    <thead>
      <tr>
        <th>Currency</th>
        <th>Rate</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of ratesArray()">
        <td>{{ r.currency }}</td>
        <td>{{ r.value | number:'1.4-4' }}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="latest()">Last updated: {{ getFormattedDate(latest()) }}</p>
</div>
