<div class="forex-widget">
  <h3>Forex Rates</h3>

  <app-loading-spinner max-width="100px" max-height="100px"
    *ngIf="loading()"></app-loading-spinner>

  <div *ngIf="error()" class="error">{{ error() }}</div>

  <div class="controls">
    <label for="baseSelect">Base currency:</label>
    <select
      id="baseSelect"
      [ngModel]="selectedBase()"
      (ngModelChange)="onBaseChange($event)"
    >
      <option *ngFor="let b of bases" [value]="b">{{ b }}</option>
    </select>
  </div>

  <table *ngIf="latest() && !loading()">
    <thead>
      <tr>
        <th>Currency</th>
        <th>Last Price</th>
        <th>Trend</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let r of ratesArray()">
        <td>{{ r.currency }}</td>
        <td>{{ r.value | number:'1.4-4' }}</td>
        <td>
          <ng-container *ngIf="r.trendInfo; else noTrend">
            {{ r.trendInfo.trend }}
            ({{ r.trendInfo.dailyChange }}%)
          </ng-container>
          <ng-template #noTrend>â€”</ng-template>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="latest()">Last updated: {{ getFormattedDate(latest()) }}</p>
</div>
